#! /bin/sh

example_stp=`ls ${SRCDIR}/examples/*.stp`
sub_stp=`ls ${SRCDIR}/examples/small_demos/*.stp`

ret=0

for i in $example_stp $sub_stp
do
#iostat-scsi, sigmon need parameter
case $i in
	(*iostat-scsi.stp)
		stap -p4 $i 5
	;;
	(*sigmon.stp)
		stap -p4 -x 1234 $i SIGKILL
	;;
	(*small_demos/keyhack.stp)
		stap -p4 -g $i
	;;
	*)
		stap -p4 $i
	;;
esac

if [ $? -eq 0 ];then
	echo "PASS: $i"
else
	echo "FAIL: $i"
	ret=1
fi
done

exit $ret
