#!/bin/env stap

probe kernel.function("sys_read") { //for loading kernel symbols
}

probe begin {
        process_pid = target()
        process_task = pid2task(process_pid)
        if (process_task) {
           if (task_state(process_task) != 0) // Not TASK_RUNNING
              println(task_backtrace(process_task))
        } else
              println("No such process")
        exit()
}
