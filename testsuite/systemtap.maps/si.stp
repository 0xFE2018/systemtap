#test of string maps containing ints

global foo

probe begin {
	for (i=0;i<11;i++)
		foo[sprint(i)] = i*i 	

	foreach (str in foo)
	 	printf("foo[%s] = %d\n", str, foo[str])

	# delete out of the middle
	foo["5"] = 0
	printf("\n")
	foreach (str in foo)
	 	printf("foo[%s] = %d\n", str, foo[str])

	# delete first entry
	foo["1"] = 0
	# and last entry
	foo["10"] = 0
	printf("\n")
	foreach (str in foo)
	 	printf("foo[%s] = %d\n", str, foo[str])


	# change a couple
	foo["9"] = -81
	foo["4"] = -foo["4"]
	foo["3"] *= 100
	printf("\n")
	foreach (str in foo)
	 	printf("foo[%s] = %d\n", str, foo[str])


	# delete one
	foo["4"] = 0
	printf("\n")
	foreach (str in foo)
	 	printf("foo[%s] = %d\n", str, foo[str])


	# delete all
	delete foo
	printf("\n")
	foreach (str in foo)
	 	printf("foo[%s] = %d\n", str, foo[str])


	# load it again
	for (i=0;i<11;i++)
		foo[sprint(i)] = i*i 	
	for (i=0;i<11;i++)
		foo[sprint(i)] += foo[sprint(i-1)]
	printf("\n")
	foreach (str in foo)
	 	printf("foo[%s] = %d\n", str, foo[str])


	exit()
}

