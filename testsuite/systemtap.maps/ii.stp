#test of int maps containing ints

global foo

probe begin {
	for (i=0;i<11;i++)
		foo[i] = i*i 	

	foreach (i in foo)
	 	printf("foo[%d] = %d\n", i, foo[i])

	# delete out of the middle
	foo[5] = 0
	printf("\n")
	foreach (i in foo)
	 	printf("foo[%d] = %d\n", i, foo[i])

	# delete first entry
	foo[1] = 0
	# and last entry
	foo[10] = 0
	printf("\n")
	foreach (i in foo)
	 	printf("foo[%d] = %d\n", i, foo[i])

	# change a couple
	foo[9] = -81
	foo[4] = -foo[4]
	foo[3] *= 100
	printf("\n")
	foreach (i in foo)
	 	printf("foo[%d] = %d\n", i, foo[i])

	# delete one
	foo[4] = 0
	printf("\n")
	foreach (i in foo)
	 	printf("foo[%d] = %d\n", i, foo[i])

	# delete all
	for (i=0;i<11;i++)
		foo[i] = 0 	
	printf("\n")
	foreach (i in foo)
	 	printf("foo[%d] = %d\n", i, foo[i])

	# load it again
	for (i=0;i<11;i++)
		foo[i] = i*i 	
	for (i=0;i<11;i++)
		foo[i] += foo[i-1]
	printf("\n")
	foreach (i in foo)
	 	printf("foo[%d] = %d\n", i, foo[i])

	exit()
}

