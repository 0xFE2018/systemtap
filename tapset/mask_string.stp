/*
 These functions construct the bitwise-or'd symbolic string
 representation of the f param, based on the function arg.
*/
function __decf(f,mask){ return ((f-mask)>=0) ? (f-mask) : f }

/* `man 2 open` for more information */
function _sys_open_flag_str(f) {
   if((f-8192)>=0 && (f=__decf(f,8192))>=0) bs="O_ASYNC|".bs
   if((f-4096)>=0 && (f=__decf(f,4096))>=0) bs="O_SYNC|".bs
   if((f-2048)>=0 && (f=__decf(f,2048))>=0) bs="O_NONBLOCK|".bs
   if((f-1024)>=0 && (f=__decf(f,1024))>=0) bs="O_APPEND|".bs
   if((f-512)>=0  && (f=__decf(f,512))>=0) bs="O_TRUNC|".bs
   if((f-256)>=0  && (f=__decf(f,256))>=0) bs="O_NDCTTY|".bs
   if((f-128)>=0  && (f=__decf(f,128))>=0) bs="O_EXCL|".bs
   if((f-64)>=0   && (f=__decf(f,64))>=0) bs="O_CREAT|".bs
   if((f-2)>=0    && (f=__decf(f,2))>=0)
      return substr("O_RDWR|".bs,0,strlen("O_RDWR|".bs)-1)
   if((f-1)>=0    && (f=__decf(f,1))>=0)
      return substr("O_WRONLY|".bs,0,strlen("O_WRONLY|".bs)-1)
   return substr("O_RDONLY|".bs,0,strlen("O_RDONLY|".bs)-1)
}

/* `man 2 open` for more information */
function _sys_open_mode_str(f) {
   if((f-448)>=0 && (f=__decf(f,448))>=0) bs="S_IRWXU|".bs
   if((f-256)>=0 && (f=__decf(f,256))>=0) bs="S_IRUSR|".bs
   if((f-128)>=0 && (f=__decf(f,128))>=0) bs="S_IWUSR|".bs
   if((f-64)>=0 && (f=__decf(f,64))>=0) bs="S_IXUSR|".bs
   if((f-56)>=0 && (f=__decf(f,56))>=0) bs="S_IRWXG|".bs
   if((f-32)>=0 && (f=__decf(f,32))>=0) bs="S_IRGRP|".bs
   if((f-16)>=0 && (f=__decf(f,16))>=0) bs="S_IWGRP|".bs
   if((f-8)>=0 && (f=__decf(f,8))>=0) bs="S_IXGRP|".bs
   if((f-7)>=0 && (f=__decf(f,7))>=0) bs="S_IRWXO|".bs
   if((f-4)>=0 && (f=__decf(f,4))>=0) bs="S_IROTH|".bs
   if((f-2)>=0 && (f=__decf(f,2))>=0) bs="S_IWOTH|".bs
   if((f-1)>=0 && (f=__decf(f,1))>=0) bs="S_IXOTH|".bs
   return substr(bs,0,strlen(bs)-1)

/* `man adjtimex` for more information */
function _sys_adjtimex_mode_str(f) {
   if((f-32769)>=0 && (f=__decf(f,32769))>=0) bs="ADJ_OFFSET_SINGLESHOT|".bs
   if((f-16384)>=0 && (f=__decf(f,16384))>=0) bs="ADJ_TICK|".bs
   if((f-32)>=0 && (f=__decf(f,32))>=0) bs="ADJ_TIMECONST|".bs
   if((f-16)>=0 && (f=__decf(f,16))>=0) bs="ADJ_STATUS|".bs
   if((f-8)>=0 && (f=__decf(f,8))>=0) bs="ADJ_ESTERROR|".bs
   if((f-3)>=0 && (f=__decf(f,3))>=0) bs="ADJ_MAXERROR|".bs
   if((f-2)>=0 && (f=__decf(f,2))>=0) bs="ADJ_FREQUENCY|".bs
   if((f-1)>=0 && (f=__decf(f,1))>=0) bs="ADJ_OFFSET|".bs
   return substr(bs,0,strlen(bs)-1)
}
