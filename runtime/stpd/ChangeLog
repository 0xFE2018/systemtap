2005-07-13  Martin Hunt  <hunt@redhat.com>

	* stpd.c (usage): Fix usage string.

	* librelay.c (init_stp): Change last arg to NULL, not 0.

2005-07-08  Martin Hunt  <hunt@redhat.com>

	* librelay.c (sigchld): Signal handler to detect
	completion of module loading.
	(init_stp): Use fork/exec instead of system() so
	we can get async signal of module load success/failure.
	(cleanup_and_exit): New function. 
	(sigproc): If module is not loaded, don't send message to it.
	(stp_main_loop): Call cleanup_and_exit() when STP_EXIT
	is received. Don't send a request for the transport
	mode. The module will send notification to the daemon
	when it is ready.

	* stpd.c (main): Don't print message until module
	is loaded.

2005-07-01  Martin Hunt  <hunt@redhat.com>

	* librelay.c: Removed the color coding of cpu output.

2005-06-28  Martin Hunt  <hunt@redhat.com>

	* librelay.c (merge_output): Use unlocked stdio
	to improve speed.

	* stp_merge.c: New file. 

	* Makefile: Add stp_merge.

2005-06-27  Martin Hunt  <hunt@redhat.com>

	* stpd.c (main): Add new command line arg, "-m"
	to disable the per-cpu merging.

	* librelay.c (merge_output): Replacement for sort_output().
	Efficiently merges per-cpu streams.

	
2005-06-20  Tom Zanussi  <zanussi@us.ibm.com>

	* librelay.c: Large refactoring, important changes are
	added transport_mode command, for relayfs transport
	display results only when probe completes and/or write
	output file, merge, sort and delete the per-cpu files
	in postprocessing, refactor so that relayfs files aren't
	created until transport command received, removed sigalrm,
	read the final subbuffers on exit

	* stpd.c: Remove all command-line args except for -p
	and -q as well as all code related to buffer sizes.

	* librelay.h: Add transport mode command and struct.

2005-05-16  Martin Hunt  <hunt@redhat.com>

	* librelay.c (sigproc): If STP_EXIT send fails, keep retrying 
	every 10ms.
	(init_stp): Don't set n_subbufs and subbuf_size params.
	
